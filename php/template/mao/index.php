<?
$p=$_WEITE['web_pic_url']."mao/";
?>
<style type="text/css">
*
{
    padding: 0px;
    margin: 0px;
    -webkit-box-sizing: border-box;
}

body
{
    background-color: black;
}

#container
{
    width: 500px;
    height: 100%;
    position: absolute;
    overflow: hidden;
}
    *
    {
        padding: 0px;
        margin: 0px;
        -webkit-box-sizing: border-box;
    }

    #bg
    {
        padding: 0px;
        margin: 0px;
        -webkit-box-sizing: border-box;
    }

    #container
    {
        width: 500px;
        height: 815px;
        position: absolute;
        overflow: hidden;
    }

    #container > img ,#container > div
    {
        position: absolute;
    }
    #shangbei
{
    width:500px;
    height:100px;
    position: absolute;
    left: 0px;
    top: 0px; 
    background-color: black;
}


#qinjian
{
        top: 38px;
        left: 3px;
        position: absolute;
        border: 0px hidden; 
}



#anjian1
{
    overflow: hidden;
    position: absolute;
    top: 29px;
    left:42px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian1 2s linear infinite;
}
@-webkit-keyframes anjian1
    {
        0%{opacity :0;}
        30%{opacity: 0}
        33%{opacity: 1}
        38%{opacity: 1}
        43%{opacity: 0}
        100% {;opacity :0;}
    } 
    
    #anjian12
{
    
    overflow: hidden;
    position: absolute;
    top: 28px;
    left:419px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian12 2s linear infinite;
}
@-webkit-keyframes anjian12
    {
        0%{opacity :0;}
        30%{opacity: 0}
        33%{opacity: 1}
        38%{opacity: 1}
        43%{opacity: 0}
        100% {;opacity :0;}
    } 

#anjian2
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:128px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian2 2s linear infinite;
}
@-webkit-keyframes anjian2
    {
        0%{opacity :0;}
        3%{opacity: 1}
        8%{opacity: 1}
        13%{opacity: 0}
        100% {opacity :0;}
    } 
    
#anjian3
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:-14px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian3 2s linear infinite;
}
@-webkit-keyframes anjian3
    {
        0%{opacity :0;}
        3%{opacity: 1}
        8%{opacity: 1}
        13%{opacity: 0}
        60%{opacity: 0}
        63%{opacity: 1}
        68%{opacity: 1}   
        73%{opacity: 0}     
        100% {;opacity :0;}
    } 
    
    #anjian32
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:368px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian32 2s linear infinite;
}
@-webkit-keyframes anjian32
    {
        0%{opacity :0;}
        20%{opacity: 0}
        23%{opacity: 1}
        28%{opacity: 1}   
        33%{opacity: 0}     
        100% {;opacity :0;}
    }

    #anjian4
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:206px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian4 2s linear infinite;
}
@-webkit-keyframes anjian4
    {
        0%{opacity :0;}
        60%{opacity: 0}
        63%{opacity: 1}
        68%{opacity: 1}   
        73%{opacity: 0}     
        100% {opacity :0;}
    } 
    
    #anjian42
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:266px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian42 2s linear infinite;
}
@-webkit-keyframes anjian42
    {
        0%{opacity :0;}
        60%{opacity: 0}
        63%{opacity: 1}
        68%{opacity: 1}   
        73%{opacity: 0}           
        100% {;opacity :0;}
    } 
    #anjian43
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:28px;
    -webkit-transform:scale(1.3,1);
    -webkit-animatio:anjian43 2s linear infinite;
}
@-webkit-keyframes anjian43
    {
        0%{opacity :0;}
        60%{opacity: 0}
        63%{opacity: 1}
        68%{opacity: 1}   
        73%{opacity: 0}           
        100% {;opacity :0;}
    }     

#anjian5
{
    
    overflow: hidden;
    position: absolute;
    top: 30px;
    left:186px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian5 2s linear infinite;
}
@-webkit-keyframes anjian5
    {
        0%{opacity :0;}
        90%{opacity: 0}
        93%{opacity: 1}
        98%{opacity: 1}   
        100% {opacity :0;}
    } 
    
    #anjian52
{
    
    overflow: hidden;
    position: absolute;
    top: 29px;
    left:450px;
    -webkit-transform:scale(1.3,1);
    -webkit-animation:anjian52 2s linear infinite;
}
@-webkit-keyframes anjian52
    {
        0%{opacity :0;}
        90%{opacity: 0}
        93%{opacity: 1}
        98%{opacity: 1}   
        100% {;opacity :0;}
    } 


#wuxian
{
    position: absolute;
    top: 135px;
    left: -80px;
    -webkit-animation:wuxian 2s linear infinite alternate;
}
@-webkit-keyframes wuxian
{
    from{-webkit-transform:translate(0px,0px);}
    to{-webkit-transform:translate(80px,0px);}
}

#wuxian1
{
    position: absolute;
    top: 635px;
    left: -40px;
    -webkit-animation:wuxian1 2s linear infinite alternate;
}
@-webkit-keyframes wuxian1
{
    from{-webkit-transform:translate(0px,0px);}
    to{-webkit-transform:translate(-80px,0px);}
}

#yinfu0
{
    position: absolute;
    top: 160px;
    left: 340px;
}

#yinfu1
{
    position: absolute;
    top: 676px;
    left: 30px;
}

#yinfu2
{
    position: absolute;
    top: 656px;
    left: 30px;
}

#yinfu3
{
    position: absolute;
    top: 120px;
    left: 280px;
}
#yinfu33
{
    position: absolute;
    top: 100px;
    left: 44px;
}

#yinfu4
{
    position: absolute;
    top: 125px;
    left: 80px;
}

#yinfu5
{
    position: absolute;
    top: 111px;
    left: 110px;
}

#yinfu31
{
    position: absolute;
    top: 600px;
    left: 300px;
}

#yinfu41
{
    position: absolute;
    top: 597px;
    left: 305px;
}

#yinfu51
{
    position: absolute;
    top: 610px;
    left: 305px;
}

#wuxian_kawa
{
    position: absolute;
    left: 0px;
    top: -20px;
    width: 500px;
    height: 50px;
}

#gangqin
{
    position: absolute;
    top: 620px;
    left: 180px;
    -webkit-animation:gangqin 0.8s linear alternate infinite;

}
@-webkit-keyframes gangqin
{
    0%{-webkit-transform:scale(1,1);}
    50%{-webkit-transform:scale(0.95,1.05);}
    100%{-webkit-transform:scale(1,1);}    
}

#kawa_mao
{
    position: absolute;
    top: 610px;
    left: 144px;    
    -webkit-transform-origin:30% 90%;
    -webkit-animation:kawa_mao 0.4s linear alternate infinite;    
}
@-webkit-keyframes kawa_mao
{

    0%{-webkit-transform:rotate(10deg);}
    100%{-webkit-transform:rotate(0deg);}
}

#heimao1shou
{
    position: absolute;
    top: 630px;
    left: 110px; 
    -webkit-animation:heimao1shou 0.4s linear alternate infinite;  
}

@-webkit-keyframes heimao1shou
{

    0%{-webkit-transform:rotate(10deg);}
    100%{-webkit-transform:rotate(0deg);}
}

#heimao1wei
{
    position: absolute;
    top: 618px;
    left: 80px;
    -webkit-transform-origin:90% 80%;    
    -webkit-animation:heimao1wei 0.4s linear alternate infinite;  
}
@-webkit-keyframes heimao1wei
{

    0%{-webkit-transform:rotate(-15deg);}
    100%{-webkit-transform:rotate(-5deg);}
}

#yinfu_kawa
{
    position: absolute;
    top: 520px;
    left: 210px; 
    -webkit-transform-origin:40% 70%;          
    -webkit-animation:yinfu_kawa 2s linear infinite;  
}
@-webkit-keyframes yinfu_kawa
{

    0%{-webkit-transform:translate(0px,40px) rotate(0deg) scale(0.5,0.5);opacity: 0.6;}
    50%{-webkit-transform:translate(50px,40px) rotate(100deg) scale(0.8,0.8);opacity: 1;}
    100%{-webkit-transform:translate(50px,60px) rotate(180deg) scale(1,1);opacity: 0.4;}
}

#heimao2tou
{
    position: absolute;
    top: 578px;
    left: 400px;
    -webkit-transform-origin:23% 80%;    
    -webkit-animation:heimao2tou 0.4s linear alternate infinite;  
}

@-webkit-keyframes heimao2tou
{

    0%{-webkit-transform:rotate(-15deg);}
    100%{-webkit-transform:rotate(10deg);}
}

#heimao2pigu
{
    position: absolute;
    top: 640px;
    left: 405px;
}

#heimao2wei
{
    position: absolute;
    top: 655px;
    left: 355px;
    -webkit-transform-origin:71% 30%;    
    -webkit-animation:heimao2wei 0.4s linear alternate infinite;  
}

@-webkit-keyframes heimao2wei
{

    0%{-webkit-transform:rotateY(0deg);}
    50%{-webkit-transform:rotateY(0deg);}
    51%{-webkit-transform:rotateY(180deg);}
    100%{-webkit-transform:rotateY(180deg);}
}


#div1
{
    position: absolute;
    top: 175px;
    left: 0px;
    width: 480px;
    height: 480px;
    border-radius:240px; 
    overflow: hidden; 

}

#div2
{
    position: absolute;
    top: 175px;
    left: 0px;
    width: 480px;
    height: 480px;
    border-radius:240px;    
    overflow: hidden; 

}

#div3
{
    position: absolute;
    top: 175px;
    left: 0px;
    width: 480px;
    height: 480px;
    border-radius:240px;   
    overflow: hidden; 
}

#div4
{
    position: absolute;
    top: 175px;
    left: 0px;
    width: 480px;
    height: 480px;
    border-radius:240px;   
    overflow: hidden; 
}

.imgbox
{
    position: absolute;
    top: 38px;
    left: 37px;
    width: 420px;
    height: 420px;
    border-radius:210px;   
    overflow: hidden;
}
@-webkit-keyframes showtitle
{
    from  {-webkit-transform: translate(0px,0px);opacity: 0}
    to    {-webkit-transform: translate(0px,50px);opacity: 1}
}

@-webkit-keyframes liangziyun_begin
{
    from  {-webkit-transform: translate(0px,50px);opacity: 1}
    to    {-webkit-transform: translate(-130px,-190px) scale(0.6);}
}


@-webkit-keyframes ditu1
{
    0%{-webkit-transform:translate(-500px,0px) rotate(-50deg);}
    25%{-webkit-transform:translate(0px,0px) rotate(-10deg);}
    50%{-webkit-transform:translate(0px,0px) rotate(16.7deg);}
    75%{-webkit-transform:translate(0px,0px) rotate(-10deg);}  
    100%{-webkit-transform:translate(-500px,0px) rotate(-50deg);}
}

@-webkit-keyframes ditu2
{   
    0%{-webkit-transform:translate(500px,0px) rotate(50deg);}
    25%{-webkit-transform:translate(0px,0px) rotate(10deg);}
    50%{-webkit-transform:translate(0px,0px) rotate(-16.7deg);}
    75%{-webkit-transform:translate(0px,0px) rotate(10deg);}  
    100%{-webkit-transform:translate(500px,0px) rotate(50deg);}
}

@-webkit-keyframes ditu3
{    
    0%{-webkit-transform:translate(-500px,0px) rotate(-50deg);}
    25%{-webkit-transform:translate(0px,0px) rotate(-10deg);}
    50%{-webkit-transform:translate(0px,0px) rotate(16.7deg);}
    75%{-webkit-transform:translate(0px,0px) rotate(-10deg);}  
    100%{-webkit-transform:translate(-500px,0px) rotate(-50deg);}
}

@-webkit-keyframes ditu4
{   
    0%{-webkit-transform:translate(500px,0px) rotate(50deg);}
    25%{-webkit-transform:translate(0px,0px) rotate(10deg);}
    50%{-webkit-transform:translate(0px,0px) rotate(-16.7deg);}
    75%{-webkit-transform:translate(0px,0px) rotate(10deg);} 
    100%{-webkit-transform:translate(500px,0px) rotate(50deg);}

}

@-webkit-keyframes disimg1
{
    from  {-webkit-transform: translate(0px,0px) rotate(-8deg);opacity: 0}
    to    {-webkit-transform: translate(0px,0px) rotate(-8deg);opacity: 0}
}
@-webkit-keyframes disimg2
{
    from  {-webkit-transform: translate(0px,0px) rotate(-1deg);opacity: 0}
    to    {-webkit-transform: translate(0px,0px) rotate(-1deg);opacity: 0}
}
@-webkit-keyframes disimg3
{
    from  {-webkit-transform: translate(0px,0px) rotate(10deg);opacity: 0}
    to    {-webkit-transform: translate(0px,0px) rotate(10deg);opacity: 0}
}
@-webkit-keyframes disimg4
{
    from  {-webkit-transform: translate(0px,0px) rotate(-2deg);opacity: 0}
    to    {-webkit-transform: translate(0px,0px) rotate(-2deg);opacity: 0}
}
</style>

<div id='container'>
    <img src="<?=$p?>images/bg.jpg" width='500' height='815'>
    <div id="div1" style='display:none' >
        <img id='img11' src="<?=$p?>images/ditu1.png" style='position:absolute'>
        <div class='imgbox' >
            <img id='img1' style='position:absolute'>
        </div>
    </div> 

    <div id="div2" style='display:none'>   
        <img id='img22' src="<?=$p?>images/ditu2.png" style='position:absolute'>
        <div class='imgbox'>
            <img id='img2' style='position:absolute'>
        </div>
    </div>

    <div id="div3" style='display:none' >
        <img id='img33' src="<?=$p?>images/ditu3.png" style='position:absolute'> 
        <div class='imgbox'>
            <img id='img3' style='position:absolute'>            
        </div>  
    </div>

    <div id="div4"  style='display:none'>
        <img id='img44' src="<?=$p?>images/ditu4.png" style='position:absolute'>    
        <div class='imgbox'>    
            <img id='img4' style='position:absolute'>
        </div>   
    </div>

    <div id="shangbei">
        <img id="qinjian" src="<?=$p?>images/qinjian.png"> 
        <img id="anjian3" src="<?=$p?>images/anjian.png" >
        <img id="anjian1" src="<?=$p?>images/anjian.png" > 
        <img id="anjian2" src="<?=$p?>images/anjian.png" > 
        <img id="anjian5" src="<?=$p?>images/anjian.png" > 
        <img id="anjian4" src="<?=$p?>images/anjian.png" >
        <img id="anjian42" src="<?=$p?>images/anjian.png"> 
        <img id="anjian32" src="<?=$p?>images/anjian.png" >
        <img id="anjian12" src="<?=$p?>images/anjian.png" >  
        <img id="anjian52" src="<?=$p?>images/anjian.png" >
    </div>

<div id="wuxian_kawa">
    <img id="wuxian" src="<?=$p?>images/wuxian.png">    
    <img id="yinfu0" src="<?=$p?>images/yinfu0.png">
    <img id="yinfu3" src="<?=$p?>images/yinfu3.png">
    <img id="yinfu4" src="<?=$p?>images/yinfu4.png">
    <img id="yinfu5" src="<?=$p?>images/yinfu5.png">
</div>

    <div style='position:absolute;top:50px;'>
        <img id="wuxian1" src="<?=$p?>images/wuxian.png">  
        <img id="yinfu1" src="<?=$p?>images/yinfu1.png">
        <img id="yinfu2" src="<?=$p?>images/yinfu2.png">
        <img id="yinfu31" src="<?=$p?>images/yinfu3.png">
        <img id="yinfu41" src="<?=$p?>images/yinfu4.png">
        <img id="yinfu51" src="<?=$p?>images/yinfu5.png">
        <img id="gangqin" src="<?=$p?>images/gangqin.png">
        <img id="kawa_mao" src="<?=$p?>images/heimao1shen.png">
        <img id="heimao1shou" src="<?=$p?>images/heimao1shou.png">
        <img id="heimao1wei" src="<?=$p?>images/heimao1wei.png">
        <img id="yinfu_kawa" src="<?=$p?>images/yinfu4.png">
        <img id="heimao2tou" src="<?=$p?>images/heimao2tou.png">
        <img id="heimao2pigu" src="<?=$p?>images/heimao2pigu.png">
        <img id="heimao2wei" src="<?=$p?>images/heimao2wei.png">
    </div>

    <div id='pagetitle' style='position:absolute;width:370px;height:227px;top:247px;left:65px;font-size:40px;color:#555;overflow:hidden;text-shadow:1px 5px 4px rgba(0, 0, 0, 0.2);font-weight:bold;'>
        <div style='position:absolute;width:370px;height:227px;top:0px;left:0px;overflow:hidden;'>
            <div style='position:absolute;width:370px;height:227px;display:table;overflow:hidden;'>
                <div id='liangziyun_title' style='width:370px;height:227px;vertical-align:middle;color:#FFFFFF;display:table-cell;text-align:center;'></div>
            </div>
        </div>
    </div>

</div>



<script>
var image_size_width=[];
var image_size_height=[];
var image_url_index=0;
var have_num = 0;
var error_num = 0;
var canshow = true;
var reshow = false;
var delaytime=3000;
var timeout0=0;
var timeout2=0;
var timeout3=0;
var timeout4=0;
var timeout5=0;


function load_images()
{
    div1=id('div1');
    div2=id('div2');
    div3=id('div3');
    div4=id('div4');

    reshow = false;
    image_size_width=[];
    image_size_height=[];
    Onload_imgs_url=[];
    image_url_index=0;
    have_num = 0;
    error_num = 0;
    begin_titletime = new Date();
    begin_titletime = begin_titletime.getTime();
    showtitle();
    canshow = true;
    for(var i=0;i<slider_images_url.length;i++)
    {
        var img=new Image();
        img.index=i;
        img.src=slider_images_url[i];
        img.onload=image_onload;
        img.onerror= image_onerror;
        Onload_imgs_url[i] = 'loading';
    }       
}


function image_onerror(event)
{
    var img = event.target;
    var index = img.index;
    if(index<10)
        error_num ++;
    Onload_imgs_url[index] = 'not find';
    console.log(Onload_imgs_url[index]);
    console.log(have_num + '-' + error_num);
    if((have_num+error_num >= 10 || slider_images_url.length == (have_num+error_num)) && canshow == true)
    {   
        reshow = false;
        canshow =false;
        if(have_num == 0)
            return;
        var end_titletime = new Date();
        end_titletime = end_titletime.getTime();
        var dis_titletime = Math.abs(end_titletime-begin_titletime);
        if(dis_titletime>delaytime)
        {
            liangziyun_begin();
        }
        else
        {
            dis_titletime = delaytime- dis_titletime;
            timeout0 = setTimeout(function()
                {
                    liangziyun_begin();
                },dis_titletime);
        }
    }
}

function image_onload(event)
{
    if(reshow == true)
        return;

    var img = event.target;
    var index = img.index;

    if(index<10)
    {
        have_num++;
    }
    Onload_imgs_url[index] = img.src;
    image_size_height[index] = img.height;
    image_size_width[index] = img.width;


    if((have_num + error_num >= 10||slider_images_url.length == (have_num+error_num)) && canshow == true)
    {   
        reshow = false;
        canshow =false;
        if(have_num == 0)
            return;
        var end_titletime = new Date();
        end_titletime = end_titletime.getTime();
        var dis_titletime = Math.abs(end_titletime-begin_titletime);
        if(dis_titletime>delaytime)
        {
            liangziyun_begin();
        }
        else
        {
            dis_titletime = delaytime- dis_titletime;
            timeout0 = setTimeout(function()
                {
                    liangziyun_begin();
                },dis_titletime);
        }

    }
}

function id(name)
{
    return document.getElementById(name);
}
function showtitle()
{
    id('liangziyun_title').innerHTML = e_desc;

    id('pagetitle').style.webkitAnimation = 'showtitle 0.7s linear both';
}
function liangziyun_begin()
{
    id('pagetitle').style.webkitAnimation = 'liangziyun_begin 1.3s cubic-bezier(.31,.05,.69,1) both';
    show1();
}


function show1()
{
    kawa_setImage('1');
    div2.style.webkitAnimation = 'disimg2 1s linear both';
    div1.style.display = 'block';
    id("div1").style.webkitAnimation = "ditu1 8s linear both";
    timeout2 = setTimeout(show2,6900);
}

function show2()
{
    kawa_setImage('2');
    div3.style.webkitAnimation = 'disimg3 1s linear both';
    div2.style.display = 'block';
    id("div2").style.webkitAnimation = "ditu2 8s linear both";
    timeout3 = setTimeout(show3,6900);

}

function show3()
{
    kawa_setImage('3');
    div4.style.webkitAnimation = 'disimg4 1s linear both';
    div3.style.display = 'block';
    id("div3").style.webkitAnimation = "ditu3 8s linear both";
    timeout4 = setTimeout(show4,6900);
}

function show4()
{
    kawa_setImage('4');
    div1.style.webkitAnimation = 'disimg1 1s linear both';
    div4.style.display = 'block';
    id("div4").style.webkitAnimation = "ditu4 8s linear both";
    timeout5 = setTimeout(show1,6900);
}


function kawa_setImage(idname)
{
    if(reshow == true)
        return;

    while(Onload_imgs_url[image_url_index] == 'not find' || Onload_imgs_url[image_url_index] == 'loading')
    {
        console.log(Onload_imgs_url[image_url_index]);
        image_url_index++;
        if(image_url_index == Onload_imgs_url.length)
            image_url_index = 0;
    }

    var img_bili = image_size_width[image_url_index]/image_size_height[image_url_index];

    var div = id('div'+idname)
    var img = id('img'+idname);
    img.src = Onload_imgs_url[image_url_index];
    console.log(img.src);

    if(img_bili > 1)
    {
        img.style.top = '0px';
        img.style.height = 420 + 'px';
        img.style.width = 420*img_bili + 'px';
        img.style.left = -((420*img_bili-420)/2)+'px';
    }
    else
    {
        img.style.left = '0px';
        img.style.width = 420+'px';
        img.style.height = 420/img_bili + 'px';
        img.style.top = -((420/img_bili-420)/2) + 'px';
    }

    image_url_index++;
    if(image_url_index == Onload_imgs_url.length)
        image_url_index = 0;

}
call_me(load_images);

function reload_scene()
{
    clearnode();
    reshow = true;
    setTimeout(load_images,100);
}
function clearnode()
{    

    id('div1').style.webkitAnimation = '';
    id('div2').style.webkitAnimation = '';
    id('div3').style.webkitAnimation = '';
    id('div4').style.webkitAnimation = '';
    id('div1').style.display = 'none';
    id('div2').style.display = 'none';
    id('div3').style.display = 'none';
    id('div4').style.display = 'none';
    id('liangziyun_title').innerHTML = '';
    id('pagetitle').style.webkitAnimation = '';

    clearTimeout(timeout0);
    clearTimeout(timeout2);
    clearTimeout(timeout3);
    clearTimeout(timeout4);
    clearTimeout(timeout5);

}


call_me(load_images);

</script>



